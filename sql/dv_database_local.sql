-- MySQL Script generated by MySQL Workbench
-- 10/03/16 19:09:08
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema DeliVariety
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `DV_USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_USER` ;

CREATE TABLE IF NOT EXISTS `DV_USER` (
  `user_id` VARCHAR(6) NOT NULL,
  `username` VARCHAR(15) NOT NULL,
  `password` VARCHAR(50) NOT NULL,
  `firstname` VARCHAR(20) NULL,
  `lastname` VARCHAR(20) NOT NULL,
  `birthday` DATE NULL,
  `gender` VARCHAR(6) NULL,
  `email` VARCHAR(30) NOT NULL,
  `phone` VARCHAR(20) NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_CATEGORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_CATEGORY` ;

CREATE TABLE IF NOT EXISTS `DV_CATEGORY` (
  `category_id` INT NOT NULL AUTO_INCREMENT,
  `category_name` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`category_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_MENU`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_MENU` ;

CREATE TABLE IF NOT EXISTS `DV_MENU` (
  `item_id` INT NOT NULL AUTO_INCREMENT,
  `item_name` VARCHAR(100) NOT NULL,
  `item_img` VARCHAR(100) NOT NULL,
  `price` DECIMAL(4,2) NOT NULL,
  `category_id` INT NOT NULL,
  PRIMARY KEY (`item_id`, `category_id`),
  INDEX `fk_DV_MENU_DV_CATEGORY1_idx` (`category_id` ASC),
  CONSTRAINT `fk_DV_MENU_DV_CATEGORY1`
    FOREIGN KEY (`category_id`)
    REFERENCES `DV_CATEGORY` (`category_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_TABLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_TABLE` ;

CREATE TABLE IF NOT EXISTS `DV_TABLE` (
  `table_id` INT NOT NULL AUTO_INCREMENT,
  `table_price` INT NOT NULL,
  PRIMARY KEY (`table_id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_CUSTOMER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_CUSTOMER` ;

CREATE TABLE IF NOT EXISTS `DV_CUSTOMER` (
  `firstname` VARCHAR(20) NULL,
  `lastname` VARCHAR(20) NOT NULL,
  `email` VARCHAR(30) NOT NULL,
  `address` VARCHAR(45) NOT NULL,
  `gender` VARCHAR(6) NULL,
  `phone` VARCHAR(20) NULL,
  PRIMARY KEY (`email`, `lastname`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_ORDER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_ORDER` ;

CREATE TABLE IF NOT EXISTS `DV_ORDER` (
  `order_id` INT NOT NULL,
  `date` DATETIME NULL,
  `email` VARCHAR(30) NOT NULL,
  `lastname` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`order_id`, `email`, `lastname`),
  INDEX `fk_DV_ORDER_DV_CUSTOMER1_idx` (`email` ASC, `lastname` ASC),
  UNIQUE INDEX `order_id_UNIQUE` (`order_id` ASC),
  CONSTRAINT `fk_DV_ORDER_DV_CUSTOMER1`
    FOREIGN KEY (`email` , `lastname`)
    REFERENCES `DV_CUSTOMER` (`email` , `lastname`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DV_ORDER_HISTORY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `DV_ORDER_HISTORY` ;

CREATE TABLE IF NOT EXISTS `DV_ORDER_HISTORY` (
  `order_id` INT NOT NULL AUTO_INCREMENT,
  `item_id` INT NOT NULL,
  `quantity` INT NULL,
  PRIMARY KEY (`order_id`, `item_id`),
  INDEX `fk_DV_ORDER_HISTORY_DV_MENU1_idx` (`item_id` ASC),
  CONSTRAINT `fk_DV_ORDER_HISTORY_DV_ORDER1`
    FOREIGN KEY (`order_id`)
    REFERENCES `DV_ORDER` (`order_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DV_ORDER_HISTORY_DV_MENU1`
    FOREIGN KEY (`item_id`)
    REFERENCES `DV_MENU` (`item_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `DV_CATEGORY`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `DV_CATEGORY` (`category_id`, `category_name`) VALUES (1, 'Snacks');
INSERT INTO `DV_CATEGORY` (`category_id`, `category_name`) VALUES (2, 'Steaks');
INSERT INTO `DV_CATEGORY` (`category_id`, `category_name`) VALUES (3, 'Noodles');
INSERT INTO `DV_CATEGORY` (`category_id`, `category_name`) VALUES (4, 'Dumplings');

COMMIT;


-- -----------------------------------------------------
-- Data for table `DV_MENU`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Pizza Roll', 'menu_snack1.png', 4.70, 1);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Fries', 'menu_snack2.png', 2.80, 1);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Bruschetta with Warm Tomatoes', 'menu_snack3.png', 6.30, 1);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Beef & Potato Croquettes', 'menu_snack4.png', 5.90, 1);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Brazilian Skirt Steak with Golden Garlic Butter', 'menu_steak1.png', 14.80, 2);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Cola- Marinated Flank Steak', 'menu_steak2.png', 12.60, 2);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Home-Cooked Meal of Steak and Potatoes', 'menu_steak3.png', 13.50, 2);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Stewed Steak', 'menu_steak4.png', 9.80, 2);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Beef Noodles', 'menu_noodle1.png', 7.80, 3);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Cold Noodles', 'menu_noodle2.png', 5.60, 3);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Wok Noodles', 'menu_noodle3.png', 6.90, 3);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Hot Oil Noddles', 'menu_noodle4.png', 6.40, 3);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Fried Dumplings', 'menu_dumpling1.png', 5.40, 4);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Dumplings Regular', 'menu_dumpling2.png', 5.20, 4);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Soup Dumplings', 'menu_dumpling3.png', 6.30, 4);
INSERT INTO `DV_MENU` (`item_id`, `item_name`, `item_img`, `price`, `category_id`) VALUES (DEFAULT, 'Dumplings Vegeterian', 'menu_dumpling4.png', 4.80, 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `DV_TABLE`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (1, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (2, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (3, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (4, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (5, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (6, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (7, 0);
INSERT INTO `DV_TABLE` (`table_id`, `table_price`) VALUES (8, 0);

COMMIT;

